@echo off
REM Automagik Hive Workspace Startup Script
REM Generated by uvx automagik-hive --init

echo ðŸ§ž Starting Automagik Hive Workspace...

REM Check if Docker is running
docker info >nul 2>&1
if errorlevel 1 (
    echo âŒ Docker is not running. Please start Docker and try again.
    exit /b 1
)

REM Start PostgreSQL first
echo ðŸ—„ï¸ Starting PostgreSQL...
docker compose up -d postgres

REM Wait for PostgreSQL to be ready
echo â³ Waiting for PostgreSQL to be ready...
:wait_postgres
timeout /t 2 /nobreak >nul
docker compose exec postgres pg_isready -U test-jarvis-fix >nul 2>&1
if errorlevel 1 goto wait_postgres

echo âœ… PostgreSQL is ready!

REM Start the workspace
echo ðŸš€ Starting workspace server...
uvx automagik-hive ./

echo ðŸŽ‰ Workspace started successfully!
