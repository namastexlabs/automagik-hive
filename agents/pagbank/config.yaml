# PagBank Digital Banking Agent Configuration
# Extracted from existing agents/specialists/pagbank_agent.py

agent:
  agent_id: "pagbank-specialist"
  version: 28
  name: "Ana - Assistente Digital PagBank"
  role: "Ana - Assistente Digital PagBank"
  description: "Ana, sua assistente digital especializada em PIX, transfer√™ncias, folha de pagamento e servi√ßos banc√°rios digitais"

model:
  provider: "anthropic"
  id: "claude-sonnet-4-20250514"
  temperature: 0.7
  max_tokens: 2000

# Portuguese instructions for customer interactions
instructions: |
  Oii! Eu sou a Ana, atendente virtual do PagBank! 
  
  üè¶ Posso te ajudar com tudo sobre:
  - PIX: transfer√™ncias instant√¢neas, chaves PIX, limites
  - Transfer√™ncias: TED, DOC, limites e hor√°rios
  - Folha de pagamento: processamento, status, problemas
  - Aplicativo: funcionalidades, problemas t√©cnicos, atualiza√ß√µes
  - Tarifas: consulta de tarifas, isen√ß√µes, regras
  - Recarga de celular: operadoras, valores, favoritos
  - Portabilidade salarial: status, documenta√ß√£o
  
  üí° Adoro conversar e resolver as coisas de forma pr√°tica e r√°pida!
  
  üîç Fico de olho especialmente em:
  - Transfer√™ncias acima de R$ 5.000 (escala√ß√£o autom√°tica)
  - Bloqueios de seguran√ßa (investiga√ß√£o necess√°ria)
  - Problemas na folha de pagamento (impacto empresarial)
  - Erros cr√≠ticos no aplicativo (experi√™ncia do usu√°rio)
  
  ‚ú® Sempre falo em portugu√™s brasileiro e priorizo sua seguran√ßa!
  
  üì± Dados do usu√°rio dispon√≠veis: {user_context.user_name}, {user_context.phone_number}, {user_context.cpf}

# Knowledge base filtering and search configuration (POC pattern)
knowledge_filter:
  business_unit: "PagBank"
  max_results: 3
  relevance_threshold: 0.7
  csv_file_path: "context/knowledge/knowledge_rag.csv"
  search_config:
    enable_hybrid_search: true
    use_semantic_search: true
    include_metadata: true

# Native Agno knowledge integration (no custom tools needed)
knowledge:
  search_knowledge: true
  enable_agentic_knowledge_filters: true
  valid_metadata_filters: ["business_unit", "solution", "typification"]

# Storage configuration
storage:
  type: "postgres"
  table_name: "pagbank_specialist"
  auto_upgrade_schema: true

# Memory and history settings
memory:
  enable_user_memories: true
  enable_agentic_memory: true
  add_history_to_messages: true
  num_history_runs: 5

# Display settings
markdown: false
show_tool_calls: true
add_datetime_to_instructions: true

# CRITICAL: Specialist response constraints (to prevent verbose responses)
success_criteria: "SUCESSO = Forneceu solu√ß√£o pr√°tica e objetiva para PIX/transfer√™ncias/conta digital em m√°ximo 300 palavras"
expected_output: "Resposta concisa e pr√°tica com: 1) Solu√ß√£o direta, 2) Passos espec√≠ficos, 3) Informa√ß√µes essenciais apenas. EVITAR textos longos desnecess√°rios."

# Business logic for escalation (extracted from existing code)
escalation_triggers:
  high_value_threshold: 5000  # R$ 5,000 for transfers
  security_keywords:
    - "bloqueio por seguran√ßa"
    - "transa√ß√£o bloqueada"
    - "pix bloqueado"
    - "transfer√™ncia negada"
    - "suspeita de fraude"
    - "conta bloqueada"
  payroll_keywords:
    - "folha n√£o processada"
    - "erro na folha"
    - "pagamento n√£o realizado"
    - "funcion√°rios n√£o receberam"
    - "folha rejeitada"
  app_critical_keywords:
    - "app n√£o abre"
    - "tela branca"
    - "erro cr√≠tico"
    - "perdeu dados"
    - "n√£o consigo acessar"
    - "travado"
    - "fechando sozinho"

# Suggested actions by query type
suggested_actions:
  pix:
    - "check_pix_limits"
    - "view_pix_keys"
    - "register_pix_key"
  transfer:
    - "check_transfer_limits"
    - "view_transfer_schedule"
  payroll:
    - "access_payroll_portal"
    - "check_payroll_status"
  app:
    - "update_app_version"
    - "clear_app_cache"
  fees:
    - "view_fee_schedule"
    - "check_fee_exemption_criteria"
  mobile_topup:
    - "access_mobile_topup"
    - "view_favorite_topups"