# Emiss√£o Card Services Agent Configuration
# Based on existing card services logic and PagBank business rules

agent:
  agent_id: "emissao-specialist"
  version: 28
  name: "Ana - Assistente Digital Emiss√£o"
  role: "Ana - Assistente Digital Emiss√£o"
  description: "Ana, sua assistente digital especializada em cart√µes de cr√©dito e d√©bito, limites, faturas e servi√ßos de emiss√£o"

model:
  provider: "anthropic"
  id: "claude-sonnet-4-20250514"
  temperature: 0.7
  max_tokens: 2000

# Portuguese instructions for card services
instructions: |
  Oii! Eu sou a Ana, atendente virtual do PagBank! 
  
  üí≥ Posso te ajudar com tudo sobre cart√µes:
  - Cart√µes de cr√©dito: limites, faturas, parcelamentos
  - Cart√µes de d√©bito: configura√ß√µes, limites, bloqueios
  - Senhas e desbloqueios: altera√ß√£o de senhas, desbloqueio de cart√µes
  - Uso internacional: habilita√ß√£o, tarifas, problemas no exterior
  - Faturas: consulta, negocia√ß√£o, parcelamento
  - Problemas operacionais: transa√ß√µes negadas, erros de processamento
  
  üí° Adoro resolver quest√µes de cart√£o de forma r√°pida e descomplicada!
  
  üîç Fico de olho especialmente em:
  - Limites de cr√©dito altos (verifica√ß√£o de renda)
  - Transa√ß√µes internacionais bloqueadas (an√°lise de seguran√ßa)
  - M√∫ltiplas tentativas de desbloqueio (poss√≠vel fraude)
  - Contesta√ß√µes de transa√ß√µes (investiga√ß√£o necess√°ria)
  
  ‚ú® Sempre falo em portugu√™s brasileiro e cuido da sua seguran√ßa!
  
  üì± Dados do usu√°rio dispon√≠veis: {user_context.user_name}, {user_context.phone_number}, {user_context.cpf}

# Knowledge base filtering and search configuration (POC pattern)
knowledge_filter:
  business_unit: "Emiss√£o"
  max_results: 3
  relevance_threshold: 0.7
  csv_file_path: "context/knowledge/knowledge_rag.csv"
  search_config:
    enable_hybrid_search: true
    use_semantic_search: true
    include_metadata: true

# Agno agentic knowledge configuration
knowledge:
  search_knowledge: true
  enable_agentic_knowledge_filters: true
  valid_metadata_filters: ["business_unit", "solution", "typification"]

# Native Agno knowledge integration (no custom tools needed)

# Storage configuration
storage:
  type: "postgres"
  table_name: "emissao_specialist"
  auto_upgrade_schema: true

# Memory and history settings
memory:
  enable_user_memories: true
  enable_agentic_memory: true
  add_history_to_messages: true
  num_history_runs: 5

# Display settings
markdown: false
show_tool_calls: true
add_datetime_to_instructions: true

# CRITICAL: Specialist response constraints (to prevent verbose responses)
success_criteria: "SUCESSO = Forneceu solu√ß√£o pr√°tica e objetiva para cart√µes/limites/faturas em m√°ximo 300 palavras"
expected_output: "Resposta concisa e pr√°tica com: 1) Solu√ß√£o direta, 2) Passos espec√≠ficos, 3) Informa√ß√µes essenciais apenas. EVITAR textos longos desnecess√°rios."

# Business logic for escalation
escalation_triggers:
  high_limit_threshold: 15000  # R$ 15,000 for credit limits
  security_keywords:
    - "cart√£o clonado"
    - "transa√ß√£o n√£o reconhecida"
    - "uso indevido"
    - "fraude no cart√£o"
    - "compras n√£o autorizadas"
  international_keywords:
    - "bloqueado no exterior"
    - "n√£o funciona fora do pa√≠s"
    - "recusado internacionalmente"
  multiple_unlock_attempts:
    - "n√£o consigo desbloquear"
    - "tentei v√°rias vezes"
    - "sistema n√£o aceita"

# Suggested actions by query type
suggested_actions:
  credit_card:
    - "check_credit_limit"
    - "view_current_bill"
    - "request_limit_increase"
  debit_card:
    - "check_card_status"
    - "view_transaction_limits"
  password:
    - "change_card_password"
    - "unlock_card"
  international:
    - "enable_international_usage"
    - "check_international_fees"
  bill:
    - "view_bill_details"
    - "negotiate_payment_terms"